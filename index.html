<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- 
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    /> -->

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"
    />

    <link rel="stylesheet" href="./app.css" />

    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"
    ></script>

    <script
      defer
      src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"
      integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D"
      crossorigin="anonymous"
      async
    ></script>

    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"
    ></script>

    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.min.js"
    ></script>
  </head>
  <body>
    <div
      class="container-fluid px-0 relative"
    >
      <!-- <img class="position-absolute top-0 end-0 opacity-25 rounded-pill overflow-hidden" src="./endless-constellation-2.svg" alt=""> -->
      <!-- <img class="position-absolute bottom-0 start-0 opacity-25 rounded-pill overflow-hidden" src="./endless-constellation-2.svg" alt=""> -->

      <header class="sticky-top"> 
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
          <div class="container-fluid">
            <a href="/" class="navbar-brand">
              <span class="fs-4">Simple header</span>
            </a>

            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavDropdown"
              aria-controls="navbarNavDropdown"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div
              class="collapse navbar-collapse"
              id="navbarNavDropdown"
            >
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#"
                    >Home</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Features</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Pricing</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>

      <main>
        <section
          id="section__hero"
          class="text-light bg-primary-2 px-4 pt-5 text-center border-bottom"
        >
          <div class="container pt-5">
            <h1 class="display-2 fw-bolder">Centered screenshot</h1>

            <div class="col-lg-6 mx-auto mt-3">
              <p class="lead mb-4 ">
                Quickly design and customize responsive mobile-first sites with
                Bootstrap, the world’s most popular front-end open source
                toolkits.
              </p>
              <div class="my-5">
                <button
                  type="button"
                  class="btn btn-lime btn-lg px-4 fw-bold rounded-0"
                >
                  Send me a message
                </button>

                <i class="mt-5 d-block fs-2 fas fa-angle-double-down"></i>
              </div>
            </div>
            <div class="overflow-hidden" style="max-height: 50vh">
              <div class="container px-5">
                <img
                  src="https://source.unsplash.com/random"
                  class="img-fluid rounded-3 shadow-lg mb-4"
                  alt="Example image"
                  width="700"
                  height="500"
                  loading="lazy"
                />
              </div>
            </div>
          </div>
        </section>

        <section id="section__about">
          <div class="container">
            <header class="vstack align-items-center py-5 mt-5">
              <h1 class="display-3 fw-bolder">About Us</h1>
              <p class="lead">Lorem ipsum dolor sit amet.</p>
            </header>

            <div
              class="row"
              data-masonry='{"percentPosition": true }'
              style="position: relative; height: 690px"
            >
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 0%; top: 0px"
              >
                <div class="card">
                  <svg
                    class="bd-placeholder-img card-img-top"
                    width="100%"
                    height="200"
                    xmlns="http://www.w3.org/2000/svg"
                    role="img"
                    aria-label="Placeholder: Image cap"
                    preserveAspectRatio="xMidYMid slice"
                    focusable="false"
                  >
                    <title>Placeholder</title>
                    <rect width="100%" height="100%" fill="#868e96"></rect>
                    <text x="50%" y="50%" fill="#dee2e6" dy=".3em">
                      Image cap
                    </text>
                  </svg>

                  <div class="card-body">
                    <h5 class="card-title">
                      Card title that wraps to a new line
                    </h5>
                    <p class="card-text">
                      This is a longer card with supporting text below as a
                      natural lead-in to additional content. This content is a
                      little bit longer.
                    </p>
                  </div>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 33.3333%; top: 0px"
              >
                <div class="card p-3">
                  <figure class="p-3 mb-0">
                    <blockquote class="blockquote">
                      <p>
                        A well-known quote, contained in a blockquote element.
                      </p>
                    </blockquote>
                    <figcaption class="blockquote-footer mb-0 text-muted">
                      Someone famous in
                      <cite title="Source Title">Source Title</cite>
                    </figcaption>
                  </figure>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 66.6667%; top: 0px"
              >
                <div class="card">
                  <svg
                    class="bd-placeholder-img card-img-top"
                    width="100%"
                    height="200"
                    xmlns="http://www.w3.org/2000/svg"
                    role="img"
                    aria-label="Placeholder: Image cap"
                    preserveAspectRatio="xMidYMid slice"
                    focusable="false"
                  >
                    <title>Placeholder</title>
                    <rect width="100%" height="100%" fill="#868e96"></rect>
                    <text x="50%" y="50%" fill="#dee2e6" dy=".3em">
                      Image cap
                    </text>
                  </svg>

                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      This card has supporting text below as a natural lead-in
                      to additional content.
                    </p>
                    <p class="card-text">
                      <small class="text-muted">Last updated 3 mins ago</small>
                    </p>
                  </div>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 33.3333%; top: 171px"
              >
                <div class="card bg-primary-2 text-white text-center p-3">
                  <figure class="mb-0">
                    <blockquote class="blockquote">
                      <p>
                        A well-known quote, contained in a blockquote element.
                      </p>
                    </blockquote>
                    <figcaption class="blockquote-footer mb-0 text-white">
                      Someone famous in
                      <cite title="Source Title">Source Title</cite>
                    </figcaption>
                  </figure>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 33.3333%; top: 310px"
              >
                <div class="card text-center">
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      This card has a regular title and short paragraph of text
                      below it.
                    </p>
                    <p class="card-text">
                      <small class="text-muted">Last updated 3 mins ago</small>
                    </p>
                  </div>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 0%; top: 362px"
              >
                <div class="card">
                  <svg
                    class="bd-placeholder-img card-img"
                    width="100%"
                    height="260"
                    xmlns="http://www.w3.org/2000/svg"
                    role="img"
                    aria-label="Placeholder: Card image"
                    preserveAspectRatio="xMidYMid slice"
                    focusable="false"
                  >
                    <title>Placeholder</title>
                    <rect width="100%" height="100%" fill="#868e96"></rect>
                    <text x="50%" y="50%" fill="#dee2e6" dy=".3em">
                      Card image
                    </text>
                  </svg>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 66.6667%; top: 378px"
              >
                <div class="card p-3 text-end">
                  <figure class="mb-0">
                    <blockquote class="blockquote">
                      <p>
                        A well-known quote, contained in a blockquote element.
                      </p>
                    </blockquote>
                    <figcaption class="blockquote-footer mb-0 text-muted">
                      Someone famous in
                      <cite title="Source Title">Source Title</cite>
                    </figcaption>
                  </figure>
                </div>
              </div>
              <div
                class="col-sm-6 col-lg-4 mb-4"
                style="position: absolute; left: 33.3333%; top: 488px"
              >
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">
                      This is another card with title and supporting text below.
                      This card has some additional content to make it slightly
                      taller overall.
                    </p>
                    <p class="card-text">
                      <small class="text-muted">Last updated 3 mins ago</small>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="section__form">
          <div class="container overflow-hidden" style="max-height: 1150px">
            <div class="container px-lg-5">
              <div class="row pt-5">
                <div
                  class="col-12 col-md-11 col-lg-12 mx-auto bg-white shadow-lg mt-5 px-4 px-sm-5 py-5 rounded-3"
                >
                  <header class="col-12 col-xl-6 mx-auto text-center">
                    <h1 class="mb-3 display-3 text-center fw-bolder">Contact form</h1>
                    <p class="fw-bold">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Facere vero laborum provident, dolorum tenetur laboriosam animi velit saepe aliquid at!</p>
                  </header>

                  <form
                    class="pb-5"
                    novalidate
                    name="submit-to-google-sheet"
                    target="_blank"
                    action="https://formsubmit.co/d3efd1e941e9c6c6068b0f9d3d2ac83e"
                    method="POST"
                  >
                    <input
                      type="hidden"
                      name="_subject"
                      value="New submission!"
                    />
                    <input type="text" name="_honey" style="display: none" />
                    <input type="hidden" name="_captcha" value="true" />
                    <input
                      type="hidden"
                      name="_autoresponse"
                      value="Thankyou for submitting a message."
                    />
                    <input type="hidden" name="_template" value="table" />

                    <div class="row g-4 py-5">
                      <div class="col-12 col-xl-9 mx-auto">
                        <label
                            for="email"
                            class="form-label fw-bold text-primary"
                            >Email
                            <span class="text-muted"
                              >(required | valid email)</span
                            ></label
                          >
                          <input
                            name="email"
                            type="email"
                            class="form-control form-control-lg"
                            id="email"
                            placeholder="you@example.com"
                            required
                          />

                          <div id="emailError" class="invalid-feedback">
                            Email field should be valid and not empty!. Please
                            check your input carefully.
                          </div>
                      </div>

                      <div class="col-12 col-xl-9 mx-auto">
                        <label
                          for="fullName"
                          class="form-label fw-bold text-primary"
                          >Full name
                          <span class="text-muted">(optional)</span></label
                        >
                        <input
                          name="fullName"
                          type="text"
                          class="form-control form-control-lg"
                          id="fullName"
                          placeholder="John Doe"
                        />
                      </div>

                      <div class="col-12 col-xl-9 mx-auto ">
                        <label
                          for="message"
                          class="form-label fw-bold text-primary"
                          >Message
                          <span class="text-muted">(required)</span></label
                        >
                        <textarea
                          name="message"
                          type="textarea"
                          class="form-control form-control-lg"
                          id="message"
                          placeholder="Your message here..."
                          required
                          rows="4"
                        ></textarea>

                        <div id="messageError" class="invalid-feedback">
                          Message field should not be empty!. Please check your
                          input carefully.
                        </div>
                      </div>

                      <div class="col-12 col-xl-9 mx-auto mb-5">
                        <label
                          for="contactNumber"
                          class="form-label fw-bold text-primary"
                          >Contact number
                          <span class="text-muted"
                            >(optional | valid international phone #)</span
                          ></label
                        >

                        <input
                          name="contactNumber"
                          type="tel"
                          class="form-control form-control-lg"
                          id="contactNumber"
                          placeholder=""
                        />
                      </div>

                      <hr class="mt-5" />

                      <div class="col-12 col-xl-9 mx-auto text-center mb-5">
                      <button
                        class="w-100 btn btn-primary btn-lg"
                        type="submit"
                      >
                        Send
                      </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="container">
          <div class="py-5 my-5">
            <div class="p-5 mb-4 bg-light rounded-3">
              <div class="container-fluid py-5">
                <h1 class="display-5 fw-bold">Custom jumbotron</h1>
                <p class="col-md-8 lead">
                  Using a series of utilities, you can create this jumbotron,
                  just like the one in previous versions of Bootstrap. Check out
                  the examples below for how you can remix and restyle it to
                  your liking.
                </p>
                <button class="btn btn-primary btn-lg" type="button">
                  Example button
                </button>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer id="section__footer" class="border-top bg-primary-2">
        <div
          class="container d-flex flex-wrap justify-content-between align-items-center text-light"
        >
          <div class="col-md-4 d-flex align-items-center">
            <a
              href="/"
              class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1"
            >
              <svg class="bi" width="30" height="24">
                <use xlink:href="#bootstrap"></use>
              </svg>
            </a>
            <span class="text-muted">© 2021 Company, Inc</span>
          </div>

          <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <li class="ms-3">
              <a class="text-muted" href="#">
                <i class="fa-brands fa-twitter-square"></i>
              </a>
            </li>
            <li class="ms-3">
              <a class="text-muted" href="#">
                <i class="fa-brands fa-twitter-square"></i
              ></a>
            </li>
            <li class="ms-3">
              <a class="text-muted" href="#">
                <i class="fa-brands fa-twitter-square"></i
              ></a>
            </li>
          </ul>
        </div>
      </footer>
    </div>
  </body>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      class Validations {
        hasError = false

        __construct() {
          this.fieldElement = ""
          this.fieldType = ""
          this.fieldValue = ""
          this.fieldLabel = ""

          this.errorElement = ""
          this.errorMsg = ""
          //   this.hasError = false
        }

        init(fieldSelector, errorSelector) {
          //   this.errorMsg = ""
          //   this.hasError = false

          this.fieldElement = document.querySelector(fieldSelector)
          this.fieldType = this.fieldElement.getAttribute("type")
          this.fieldValue = this.fieldElement.value
          this.fieldLabel = this.fieldElement.getAttribute("name")
          this.errorElement = document.querySelector(errorSelector)

          if (!this.validateRequired()) {
            this.errorMsg = `${this.fieldLabel} field must not be empty! Please check your inputs carefully.`
            this.errorElement.textContent = this.errorMsg
            this.fieldElement.classList.add("is-invalid")
            this.hasError = true

            return this
          } else {
            if (this.fieldType === "email") {
              if (!this.validateEmail()) {
                this.errorMsg = `${this.fieldLabel} field must not be empty! Please check your inputs carefully.`
                this.errorElement.textContent = this.errorMsg
                this.fieldElement.classList.add("is-invalid")
                this.hasError = true
              }

              return this
            }
          }

          this.fieldElement.classList.remove("is-invalid")

          return this
        }

        validateRequired() {
          return !!this.fieldValue
        }

        validateEmail() {
          return /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(
            this.fieldValue
          )
        }
      }

      const form = document.forms["submit-to-google-sheet"]

      const googleScriptURL =
        "https://script.google.com/macros/s/AKfycbx38Fb47tdGrqhP-HeA28B8iO7h8j6pS99dstahspxkpnnJ7bZx/exec"

      const phoneInputField = document.querySelector("#contactNumber")

      const phoneInput = window.intlTelInput(phoneInputField, {
        preferredCountries: ["us", "th", "pi"],
        initialCountry: "us",
        geoIpLookup: getIp,
        formatOnDisplay: true,
        utilsScript:
          "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        customContainer: "w-100",
      })

      const numberErr = document.createElement("div")
      const contactNumberEl = document.querySelector("#contactNumber")
      numberErr.classList.add(
        "invalid-feedback",
        "position-absolute",
        "alert",
        "alert-warning",
        "mt-3"
      )
      numberErr.textContent =
        "Invalid contact number! Please check your inputs carefully."
      contactNumberEl.closest("div").appendChild(numberErr)

      form.addEventListener("submit", (e) => {
        e.preventDefault()

        const fullFormData = new FormData(form)
        const formSubmitURL = form.getAttribute("action")

        function validateContactNumber() {
          const error = phoneInput.getValidationError()
          let hasError = false

          if (!!error) {
            hasError = true
          }

          if (
            !fullFormData.get("contactNumber") &&
            !isNaN(fullFormData.get("contactNumber"))
          ) {
            hasError = false
          }

          hasError
            ? contactNumberEl.classList.add("is-invalid")
            : contactNumberEl.classList.remove("is-invalid")

          return hasError
        }
        const valEmail = new Validations().init("#email", "#emailError")
        const valMsg = new Validations().init("#message", "#messageError")

        console.log(valEmail.hasError, valMsg.hasError, validateContactNumber())
        if (valEmail.hasError || valMsg.hasError || validateContactNumber()) {
          return
        }

        const googleFormData = new FormData()
        googleFormData.append("email", fullFormData.get("email"))

        fetch(googleScriptURL, { method: "POST", body: googleFormData })
          .then((response) => {
            console.log("first fetch", response)

            form.submit()
            //   fetch(formSubmitURL, {
            //     method: "POST",
            //     headers: {
            //       "Content-Type": "application/json",
            //       "Accept": "application/json",
            //     },
            //     body: JSON.stringify(Object.fromEntries(fullFormData.entries())),
            //   }).then(console.log)
          })
          .catch((error) => console.error("Error!", error.message))
      })

      function getIp(callback) {
        const FreeGoIpToken = "aa603e00-96ee-11ec-895f-fd3df6a27034"

        fetch(`https://api.freegeoip.app/json/?apikey=${FreeGoIpToken}`, {
          headers: { Accept: "application/json" },
        })
          .then((res) => res.json())
          .then((data) => {
            const { country_code } = data
            return {
              country: country_code,
            }
          })
          .catch((err) => {
            console.log(err)

            return {
              country: "us",
            }
          })
          .then((resp) => callback(resp.country))
      }
    })
  </script>
</html>
